/* === CONTAINER PUZZLE : crée son propre stacking context === */
.puzzle-square{
  position: relative;
  width: 500px;
  height: 650px;
  margin: 0 auto;
  overflow: hidden;
  isolation: isolate; /* empêche ses enfants de dépasser la nav */
  z-index: 0;         /* le puzzle reste sous la nav */
  
}

/* Canvases et pièces */
.puzzle-square canvas,
.puzzle-square .polypiece{ position:absolute; }

canvas.polypiece.dragging { transition: none !important; }
.puzzle-square .polypiece.moving{
  transition: top 1s linear, left 1s linear;
}

/* Cache le canvas source / image */
.puzzle-square img,
.puzzle-square .gameCanvas {
  display: none !important;
}

/* --- Overlays/controls du puzzle (z-index modestes) --- */
#puzzle-timer{ z-index: 10 !important; }
#puzzle-message{ z-index: 11 !important; }
#puzzle-restart{ z-index: 12 !important; }

/* Overlay qui bloque l’interaction quand le temps est écoulé */
#puzzle-lock{
  position:absolute;
  inset:0;
  z-index: 9 !important;     /* sous le bouton, au-dessus des pièces */
  pointer-events: auto;      /* il DOIT bloquer */
  background: rgba(0,0,0,0); /* mets .15 si tu veux assombrir */
  display:none;
}

/* Assure que le bouton reste cliquable quand le lock est visible */
#puzzle-restart{
  pointer-events: auto;
  position: relative;
}

/* --- NAV MOBILE au-dessus du puzzle --- */
.mobile-menu,
.nav-overlay{
  position: fixed;
  z-index: 2000; /* > au puzzle */
}
